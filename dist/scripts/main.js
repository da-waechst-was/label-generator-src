(function(){var e,t,n=function(e,t){return function(){return e.apply(t,arguments)}};e=function(){function e(){}return e.colors=["bordeaux","himbeere","apricot"],e.unions={"Bezirksverband Prenzlauer Berg":["","Bornholm I e.V.","Bornholm II e.V"],"Bezirkverband Weißensee":["","KGA Heinersdorf e.V."],"Bezirksverband Pankow":["","Hoffnung e.V."],"Bezirksverband Weißensee":[""]},e}(),t=function(){function t(e){this.container=e,this.render=n(this.render,this),this.updateIframeContent=n(this.updateIframeContent,this),this.setupForm=n(this.setupForm,this),this.setupColorChooser=n(this.setupColorChooser,this),this.updateKgas=n(this.updateKgas,this),this.setupUnionChooser=n(this.setupUnionChooser,this),this.background=$(".label-background",this.container),this.name=$(".name",this.container),this.from=$(".from",this.container),this.date=$(".date",this.container),this.freeLine=$(".free-line",this.container),this.setupForm(),this.setupColorChooser(),this.setupUnionChooser(),this.render()}return t.prototype.setupUnionChooser=function(){var t,n,r,o,i,s,a;o=e.unions;for(a in o)s=o[a],$("#select-union").append("<option value='"+a+"'>"+a+"</option>");for(i=e.unions["Bezirksverband Prenzlauer Berg"],t=0,r=i.length;t<r;t++)n=i[t],$("#select-kga").append("<option value='"+n+"'>"+n+"</option>");return $($("#select-kga").find("option").get(1)).attr("selected","selected")},t.prototype.updateKgas=function(){var t,n,r,o,i;for($("#select-kga").find("option").remove(),t=$("#select-union").val(),i=e.unions[t],n=0,o=i.length;n<o;n++)r=i[n],$("#select-kga").append("<option value='"+r+"'>"+r+"</option>");return $($("#select-kga").find("option").get(1)).attr("selected","selected"),this.render()},t.prototype.setupColorChooser=function(){var t,n,r,o,i;for(n="active",i=e.colors,r=0,o=i.length;r<o;r++)t=i[r],$(".color-chooser").append("<li class='"+t+" "+n+"' data-color='"+t+"'></li> "),n="";return $(".color-chooser li").click(function(n){return function(r){return $(".color-chooser li").removeClass("active"),t=$(r.currentTarget).addClass("active").data("color"),n.background.prop("src","images/labels/"+t+".jpg"),n.container.removeClass(e.colors.join(" ")).addClass(t)}}(this))},t.prototype.setupForm=function(){var e,t,n,r,o;for(e=(new Date).getFullYear(),r=[e,e-1,e-2,e-3],t=0,n=r.length;t<n;t++)o=r[t],$("#select-year").append($("<option>",{value:o,text:o}));return $("#input-name").keyup(this.render),$("#input-parcel").keyup(this.render),$("#input-parcel").change(this.render),$("#input-free-text").keyup(this.render),$("#select-kga").change(this.render),$("#select-union").change(this.updateKgas),$("#select-month").change(this.render),$("#select-year").change(this.render),$("#button-print").click(function(e){return function(){var t,n;return n=window.frames.printIframe,t=e.container.parent().html(),n.document.body.innerHTML=t+t+t+t+t+t+t+t+t+t,setTimeout(function(){return window.frames.printIframe.window.print()},200)}}(this))},t.prototype.updateIframeContent=function(){var e,t;if(t=window.frames.printIframe)return e=this.container.parent().html(),t.document.body.innerHTML=e+e+e+e+e+e+e+e+e+e},t.prototype.render=function(){var e,t,n,r,o;return this.name.text($("#input-name").val()),e="vom "+$("#select-month").val()+" "+$("#select-year").val(),this.date.text(e),r=$("#input-parcel").val(),n=$("#select-kga").val(),o=$("#select-union").val(),r||n?(t="<div class='union'>Aus dem "+o+"</div>",r&&(r="Parzelle "+r),t+=[r,n].filter(function(e){return e}).join(" - ")):t="<div class='union single'>Aus dem "+o+"</div>",this.from.html(t),this.freeLine.text($("#input-free-text").val()),this.updateIframeContent()},t}(),function(){return new t($(".preview-screen"))}()}).call(this);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9jb25maWcuY29mZmVlIiwibWFpbi5qcyIsImxpYi92aWV3X2hhbmRsZXIuY29mZmVlIiwibWFpbi5jb2ZmZWUiXSwibmFtZXMiOlsiQ29uZmlnIiwiVmlld0hhbmRsZXIiLCJiaW5kIiwiZm4iLCJtZSIsImFwcGx5IiwiYXJndW1lbnRzIiwiY29sb3JzIiwidW5pb25zIiwiQmV6aXJrc3ZlcmJhbmQgUHJlbnpsYXVlciBCZXJnIiwiQmV6aXJrdmVyYmFuZCBXZWnDn2Vuc2VlIiwiQmV6aXJrc3ZlcmJhbmQgUGFua293IiwiQmV6aXJrc3ZlcmJhbmQgV2Vpw59lbnNlZSIsImNvbnRhaW5lciIsInRoaXMiLCJyZW5kZXIiLCJ1cGRhdGVJZnJhbWVDb250ZW50Iiwic2V0dXBGb3JtIiwic2V0dXBDb2xvckNob29zZXIiLCJ1cGRhdGVLZ2FzIiwic2V0dXBVbmlvbkNob29zZXIiLCJiYWNrZ3JvdW5kIiwiJCIsIm5hbWUiLCJmcm9tIiwiZGF0ZSIsImZyZWVMaW5lIiwicHJvdG90eXBlIiwiaSIsImtnYSIsImxlbiIsInJlZiIsInJlZjEiLCJ1bmlvbkNvbmZpZyIsInVuaW9uTmFtZSIsImFwcGVuZCIsImxlbmd0aCIsImZpbmQiLCJnZXQiLCJhdHRyIiwiY3VycmVudCIsInJlbW92ZSIsInZhbCIsImNvbG9yIiwiZmlyc3RDbGFzcyIsImNsaWNrIiwiX3RoaXMiLCJlIiwicmVtb3ZlQ2xhc3MiLCJjdXJyZW50VGFyZ2V0IiwiYWRkQ2xhc3MiLCJkYXRhIiwicHJvcCIsImpvaW4iLCJjdXJyZW50WWVhciIsInllYXIiLCJEYXRlIiwiZ2V0RnVsbFllYXIiLCJ2YWx1ZSIsInRleHQiLCJrZXl1cCIsImNoYW5nZSIsImNvbnRlbnQiLCJkb2MiLCJ3aW5kb3ciLCJmcmFtZXMiLCJwYXJlbnQiLCJodG1sIiwiZG9jdW1lbnQiLCJib2R5IiwiaW5uZXJIVE1MIiwic2V0VGltZW91dCIsInByaW50IiwicGFyY2VsIiwidW5pb24iLCJmaWx0ZXIiLCJjYWxsIl0s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Q0EsV0QwQ1ksTUN6Q1pQLFFBQUFDLE9BQUEsWUFBQUQsT0FBQVEsU0FDQSxPQVhBMUQsUUR5REliLEVBQVkwQixVQzFDaEJYLG9CQUFBLFdBQ0EsR0FBQThDLEdBQUFDLENBQ0EsSUFEQUEsRUFBQUMsT0FBQUMsT0FBQSxZRGdETSxNQzlDTkgsR0FBQWhELEtBQUFELFVBQUFxRCxTQUFBQyxPQUNBSixFQUFBSyxTQUFBQyxLQUFBQyxVQUFBUixFQUFBQSxFQUFBQSxFQUFBQSxFQUFBQSxFQUFBQSxFQUFBQSxFQUFBQSxFQUFBQSxFQUFBQSxHRGdESTdELEVBQVkwQixVQzlDaEJaLE9BQUEsV0FDQSxHQUFBVSxHQUFBRCxFQUFBSyxFQUFBNEMsRUFBQUMsQ0RrRU0sT0NsRU41RCxNQUFBUyxLQUFBb0MsS0FBQXJDLEVBQUEsZUFBQW9CLE9BRUFqQixFQUFBLE9BQUFILEVBQUEsaUJBQUFvQixNQUFBLElBQUFwQixFQUFBLGdCQUFBb0IsTUFDQTVCLEtBQUFXLEtBQUFrQyxLQUFBbEMsR0FFQWdELEVBQUFuRCxFQUFBLGlCQUFBb0IsTUFDQWIsRUFBQVAsRUFBQSxlQUFBb0IsTUFDQWdDLEVBQUFwRCxFQUFBLGlCQUFBb0IsTUFFQStCLEdBQUE1QyxHQUdBTCxFQUFBLDhCQUFBa0QsRUFBQSxTQUNBRCxJQUFBQSxFQUFBLFlBQUFBLEdBQ0FqRCxJQUFBaUQsRUFBQTVDLEdBQUE4QyxPQUFBLFNBQUE1QixHRCtDVSxNQy9DVkEsS0FBQU0sS0FBQSxRQUpBN0IsRUFBQSxxQ0FBQWtELEVBQUEsU0FNQTVELEtBQUFVLEtBQUEyQyxLQUFBM0MsR0FFQVYsS0FBQVksU0FBQWlDLEtBQUFyQyxFQUFBLG9CQUFBb0IsT0FFQTVCLEtBQUFFLHVCRGlEV2YsS0VySlgsV0YwSkksTUV6SkosSUFBQUEsR0FBQXFCLEVBQUEseUJGNEpHc0QsS0FBSzlEIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBDb25maWdcbiAgQGNvbG9ycyA9IFtcbiAgICAnYm9yZGVhdXgnXG4gICAgJ2hpbWJlZXJlJ1xuICAgICdhcHJpY290J1xuICBdXG5cbiAgQHVuaW9ucyA9IHtcbiAgICAnQmV6aXJrc3ZlcmJhbmQgUHJlbnpsYXVlciBCZXJnJzogW1xuICAgICAgJydcbiAgICAgICdCb3JuaG9sbSBJIGUuVi4nXG4gICAgICAnQm9ybmhvbG0gSUkgZS5WJ1xuICAgIF1cbiAgICAnQmV6aXJrdmVyYmFuZCBXZWnDn2Vuc2VlJyA6IFtcbiAgICAgICcnXG4gICAgICAnS0dBIEhlaW5lcnNkb3JmIGUuVi4nXG4gICAgXVxuICAgICdCZXppcmtzdmVyYmFuZCBQYW5rb3cnIDogW1xuICAgICAgJydcbiAgICAgICdIb2ZmbnVuZyBlLlYuJ1xuICAgIF1cbiAgICAnQmV6aXJrc3ZlcmJhbmQgV2Vpw59lbnNlZSc6IFtcbiAgICAgICcnXG4gICAgXVxuICB9XG4iLCIoZnVuY3Rpb24oKSB7XG4gIHZhciBDb25maWcsIFZpZXdIYW5kbGVyLFxuICAgIGJpbmQgPSBmdW5jdGlvbihmbiwgbWUpeyByZXR1cm4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9OyB9O1xuXG4gIENvbmZpZyA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBDb25maWcoKSB7fVxuXG4gICAgQ29uZmlnLmNvbG9ycyA9IFsnYm9yZGVhdXgnLCAnaGltYmVlcmUnLCAnYXByaWNvdCddO1xuXG4gICAgQ29uZmlnLnVuaW9ucyA9IHtcbiAgICAgICdCZXppcmtzdmVyYmFuZCBQcmVuemxhdWVyIEJlcmcnOiBbJycsICdCb3JuaG9sbSBJIGUuVi4nLCAnQm9ybmhvbG0gSUkgZS5WJ10sXG4gICAgICAnQmV6aXJrdmVyYmFuZCBXZWnDn2Vuc2VlJzogWycnLCAnS0dBIEhlaW5lcnNkb3JmIGUuVi4nXSxcbiAgICAgICdCZXppcmtzdmVyYmFuZCBQYW5rb3cnOiBbJycsICdIb2ZmbnVuZyBlLlYuJ10sXG4gICAgICAnQmV6aXJrc3ZlcmJhbmQgV2Vpw59lbnNlZSc6IFsnJ11cbiAgICB9O1xuXG4gICAgcmV0dXJuIENvbmZpZztcblxuICB9KSgpO1xuXG4gIFZpZXdIYW5kbGVyID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIFZpZXdIYW5kbGVyKGNvbnRhaW5lcikge1xuICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICB0aGlzLnJlbmRlciA9IGJpbmQodGhpcy5yZW5kZXIsIHRoaXMpO1xuICAgICAgdGhpcy51cGRhdGVJZnJhbWVDb250ZW50ID0gYmluZCh0aGlzLnVwZGF0ZUlmcmFtZUNvbnRlbnQsIHRoaXMpO1xuICAgICAgdGhpcy5zZXR1cEZvcm0gPSBiaW5kKHRoaXMuc2V0dXBGb3JtLCB0aGlzKTtcbiAgICAgIHRoaXMuc2V0dXBDb2xvckNob29zZXIgPSBiaW5kKHRoaXMuc2V0dXBDb2xvckNob29zZXIsIHRoaXMpO1xuICAgICAgdGhpcy51cGRhdGVLZ2FzID0gYmluZCh0aGlzLnVwZGF0ZUtnYXMsIHRoaXMpO1xuICAgICAgdGhpcy5zZXR1cFVuaW9uQ2hvb3NlciA9IGJpbmQodGhpcy5zZXR1cFVuaW9uQ2hvb3NlciwgdGhpcyk7XG4gICAgICB0aGlzLmJhY2tncm91bmQgPSAkKCcubGFiZWwtYmFja2dyb3VuZCcsIHRoaXMuY29udGFpbmVyKTtcbiAgICAgIHRoaXMubmFtZSA9ICQoJy5uYW1lJywgdGhpcy5jb250YWluZXIpO1xuICAgICAgdGhpcy5mcm9tID0gJCgnLmZyb20nLCB0aGlzLmNvbnRhaW5lcik7XG4gICAgICB0aGlzLmRhdGUgPSAkKCcuZGF0ZScsIHRoaXMuY29udGFpbmVyKTtcbiAgICAgIHRoaXMuZnJlZUxpbmUgPSAkKCcuZnJlZS1saW5lJywgdGhpcy5jb250YWluZXIpO1xuICAgICAgdGhpcy5zZXR1cEZvcm0oKTtcbiAgICAgIHRoaXMuc2V0dXBDb2xvckNob29zZXIoKTtcbiAgICAgIHRoaXMuc2V0dXBVbmlvbkNob29zZXIoKTtcbiAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfVxuXG4gICAgVmlld0hhbmRsZXIucHJvdG90eXBlLnNldHVwVW5pb25DaG9vc2VyID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaSwga2dhLCBsZW4sIHJlZiwgcmVmMSwgdW5pb25Db25maWcsIHVuaW9uTmFtZTtcbiAgICAgIHJlZiA9IENvbmZpZy51bmlvbnM7XG4gICAgICBmb3IgKHVuaW9uTmFtZSBpbiByZWYpIHtcbiAgICAgICAgdW5pb25Db25maWcgPSByZWZbdW5pb25OYW1lXTtcbiAgICAgICAgJCgnI3NlbGVjdC11bmlvbicpLmFwcGVuZChcIjxvcHRpb24gdmFsdWU9J1wiICsgdW5pb25OYW1lICsgXCInPlwiICsgdW5pb25OYW1lICsgXCI8L29wdGlvbj5cIik7XG4gICAgICB9XG4gICAgICByZWYxID0gQ29uZmlnLnVuaW9uc1snQmV6aXJrc3ZlcmJhbmQgUHJlbnpsYXVlciBCZXJnJ107XG4gICAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYxLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGtnYSA9IHJlZjFbaV07XG4gICAgICAgICQoJyNzZWxlY3Qta2dhJykuYXBwZW5kKFwiPG9wdGlvbiB2YWx1ZT0nXCIgKyBrZ2EgKyBcIic+XCIgKyBrZ2EgKyBcIjwvb3B0aW9uPlwiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAkKCQoJyNzZWxlY3Qta2dhJykuZmluZCgnb3B0aW9uJykuZ2V0KDEpKS5hdHRyKCdzZWxlY3RlZCcsICdzZWxlY3RlZCcpO1xuICAgIH07XG5cbiAgICBWaWV3SGFuZGxlci5wcm90b3R5cGUudXBkYXRlS2dhcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGN1cnJlbnQsIGksIGtnYSwgbGVuLCByZWY7XG4gICAgICAkKCcjc2VsZWN0LWtnYScpLmZpbmQoJ29wdGlvbicpLnJlbW92ZSgpO1xuICAgICAgY3VycmVudCA9ICQoJyNzZWxlY3QtdW5pb24nKS52YWwoKTtcbiAgICAgIHJlZiA9IENvbmZpZy51bmlvbnNbY3VycmVudF07XG4gICAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAga2dhID0gcmVmW2ldO1xuICAgICAgICAkKCcjc2VsZWN0LWtnYScpLmFwcGVuZChcIjxvcHRpb24gdmFsdWU9J1wiICsga2dhICsgXCInPlwiICsga2dhICsgXCI8L29wdGlvbj5cIik7XG4gICAgICB9XG4gICAgICAkKCQoJyNzZWxlY3Qta2dhJykuZmluZCgnb3B0aW9uJykuZ2V0KDEpKS5hdHRyKCdzZWxlY3RlZCcsICdzZWxlY3RlZCcpO1xuICAgICAgcmV0dXJuIHRoaXMucmVuZGVyKCk7XG4gICAgfTtcblxuICAgIFZpZXdIYW5kbGVyLnByb3RvdHlwZS5zZXR1cENvbG9yQ2hvb3NlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNvbG9yLCBmaXJzdENsYXNzLCBpLCBsZW4sIHJlZjtcbiAgICAgIGZpcnN0Q2xhc3MgPSAnYWN0aXZlJztcbiAgICAgIHJlZiA9IENvbmZpZy5jb2xvcnM7XG4gICAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgY29sb3IgPSByZWZbaV07XG4gICAgICAgICQoJy5jb2xvci1jaG9vc2VyJykuYXBwZW5kKFwiPGxpIGNsYXNzPSdcIiArIGNvbG9yICsgXCIgXCIgKyBmaXJzdENsYXNzICsgXCInIGRhdGEtY29sb3I9J1wiICsgY29sb3IgKyBcIic+PC9saT4gXCIpO1xuICAgICAgICBmaXJzdENsYXNzID0gJyc7XG4gICAgICB9XG4gICAgICByZXR1cm4gJCgnLmNvbG9yLWNob29zZXIgbGknKS5jbGljaygoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAkKCcuY29sb3ItY2hvb3NlciBsaScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICBjb2xvciA9ICQoZS5jdXJyZW50VGFyZ2V0KS5hZGRDbGFzcygnYWN0aXZlJykuZGF0YSgnY29sb3InKTtcbiAgICAgICAgICBfdGhpcy5iYWNrZ3JvdW5kLnByb3AoJ3NyYycsIFwiaW1hZ2VzL2xhYmVscy9cIiArIGNvbG9yICsgXCIuanBnXCIpO1xuICAgICAgICAgIHJldHVybiBfdGhpcy5jb250YWluZXIucmVtb3ZlQ2xhc3MoQ29uZmlnLmNvbG9ycy5qb2luKCcgJykpLmFkZENsYXNzKGNvbG9yKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICB9O1xuXG4gICAgVmlld0hhbmRsZXIucHJvdG90eXBlLnNldHVwRm9ybSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGN1cnJlbnRZZWFyLCBpLCBsZW4sIHJlZiwgeWVhcjtcbiAgICAgIGN1cnJlbnRZZWFyID0gKG5ldyBEYXRlKCkpLmdldEZ1bGxZZWFyKCk7XG4gICAgICByZWYgPSBbY3VycmVudFllYXIsIGN1cnJlbnRZZWFyIC0gMSwgY3VycmVudFllYXIgLSAyLCBjdXJyZW50WWVhciAtIDNdO1xuICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHllYXIgPSByZWZbaV07XG4gICAgICAgICQoJyNzZWxlY3QteWVhcicpLmFwcGVuZCgkKCc8b3B0aW9uPicsIHtcbiAgICAgICAgICB2YWx1ZTogeWVhcixcbiAgICAgICAgICB0ZXh0OiB5ZWFyXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICAgICQoJyNpbnB1dC1uYW1lJykua2V5dXAodGhpcy5yZW5kZXIpO1xuICAgICAgJCgnI2lucHV0LXBhcmNlbCcpLmtleXVwKHRoaXMucmVuZGVyKTtcbiAgICAgICQoJyNpbnB1dC1wYXJjZWwnKS5jaGFuZ2UodGhpcy5yZW5kZXIpO1xuICAgICAgJCgnI2lucHV0LWZyZWUtdGV4dCcpLmtleXVwKHRoaXMucmVuZGVyKTtcbiAgICAgICQoJyNzZWxlY3Qta2dhJykuY2hhbmdlKHRoaXMucmVuZGVyKTtcbiAgICAgICQoJyNzZWxlY3QtdW5pb24nKS5jaGFuZ2UodGhpcy51cGRhdGVLZ2FzKTtcbiAgICAgICQoJyNzZWxlY3QtbW9udGgnKS5jaGFuZ2UodGhpcy5yZW5kZXIpO1xuICAgICAgJCgnI3NlbGVjdC15ZWFyJykuY2hhbmdlKHRoaXMucmVuZGVyKTtcbiAgICAgIHJldHVybiAkKCcjYnV0dG9uLXByaW50JykuY2xpY2soKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgY29udGVudCwgZG9jO1xuICAgICAgICAgIGRvYyA9IHdpbmRvdy5mcmFtZXNbJ3ByaW50SWZyYW1lJ107XG4gICAgICAgICAgY29udGVudCA9IF90aGlzLmNvbnRhaW5lci5wYXJlbnQoKS5odG1sKCk7XG4gICAgICAgICAgZG9jLmRvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gY29udGVudCArIGNvbnRlbnQgKyBjb250ZW50ICsgY29udGVudCArIGNvbnRlbnQgKyBjb250ZW50ICsgY29udGVudCArIGNvbnRlbnQgKyBjb250ZW50ICsgY29udGVudDtcbiAgICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cuZnJhbWVzWydwcmludElmcmFtZSddLndpbmRvdy5wcmludCgpO1xuICAgICAgICAgIH0sIDIwMCk7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgfTtcblxuICAgIFZpZXdIYW5kbGVyLnByb3RvdHlwZS51cGRhdGVJZnJhbWVDb250ZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY29udGVudCwgZG9jO1xuICAgICAgZG9jID0gd2luZG93LmZyYW1lc1sncHJpbnRJZnJhbWUnXTtcbiAgICAgIGlmICghZG9jKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnRlbnQgPSB0aGlzLmNvbnRhaW5lci5wYXJlbnQoKS5odG1sKCk7XG4gICAgICByZXR1cm4gZG9jLmRvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gY29udGVudCArIGNvbnRlbnQgKyBjb250ZW50ICsgY29udGVudCArIGNvbnRlbnQgKyBjb250ZW50ICsgY29udGVudCArIGNvbnRlbnQgKyBjb250ZW50ICsgY29udGVudDtcbiAgICB9O1xuXG4gICAgVmlld0hhbmRsZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGRhdGUsIGZyb20sIGtnYSwgcGFyY2VsLCB1bmlvbjtcbiAgICAgIHRoaXMubmFtZS50ZXh0KCQoJyNpbnB1dC1uYW1lJykudmFsKCkpO1xuICAgICAgZGF0ZSA9ICd2b20gJyArICQoJyNzZWxlY3QtbW9udGgnKS52YWwoKSArICcgJyArICQoJyNzZWxlY3QteWVhcicpLnZhbCgpO1xuICAgICAgdGhpcy5kYXRlLnRleHQoZGF0ZSk7XG4gICAgICBwYXJjZWwgPSAkKCcjaW5wdXQtcGFyY2VsJykudmFsKCk7XG4gICAgICBrZ2EgPSAkKCcjc2VsZWN0LWtnYScpLnZhbCgpO1xuICAgICAgdW5pb24gPSAkKCcjc2VsZWN0LXVuaW9uJykudmFsKCk7XG4gICAgICBpZiAoIXBhcmNlbCAmJiAha2dhKSB7XG4gICAgICAgIGZyb20gPSBcIjxkaXYgY2xhc3M9J3VuaW9uIHNpbmdsZSc+QXVzIGRlbSBcIiArIHVuaW9uICsgXCI8L2Rpdj5cIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZyb20gPSBcIjxkaXYgY2xhc3M9J3VuaW9uJz5BdXMgZGVtIFwiICsgdW5pb24gKyBcIjwvZGl2PlwiO1xuICAgICAgICBpZiAocGFyY2VsKSB7XG4gICAgICAgICAgcGFyY2VsID0gXCJQYXJ6ZWxsZSBcIiArIHBhcmNlbDtcbiAgICAgICAgfVxuICAgICAgICBmcm9tID0gZnJvbSArIFtwYXJjZWwsIGtnYV0uZmlsdGVyKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfSkuam9pbignIC0gJyk7XG4gICAgICB9XG4gICAgICB0aGlzLmZyb20uaHRtbChmcm9tKTtcbiAgICAgIHRoaXMuZnJlZUxpbmUudGV4dCgkKCcjaW5wdXQtZnJlZS10ZXh0JykudmFsKCkpO1xuICAgICAgcmV0dXJuIHRoaXMudXBkYXRlSWZyYW1lQ29udGVudCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVmlld0hhbmRsZXI7XG5cbiAgfSkoKTtcblxuICAoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBWaWV3SGFuZGxlcigkKCcucHJldmlldy1zY3JlZW4nKSk7XG4gIH0pKCk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCJcbmNsYXNzIFZpZXdIYW5kbGVyXG4gIGNvbnN0cnVjdG9yOiAoQGNvbnRhaW5lcikgLT5cbiAgICBAYmFja2dyb3VuZCA9ICQoJy5sYWJlbC1iYWNrZ3JvdW5kJywgQGNvbnRhaW5lcilcbiAgICBAbmFtZSAgICAgICA9ICQoJy5uYW1lJywgQGNvbnRhaW5lcilcbiAgICBAZnJvbSAgICAgICA9ICQoJy5mcm9tJywgQGNvbnRhaW5lcilcbiAgICBAZGF0ZSAgICAgICA9ICQoJy5kYXRlJywgQGNvbnRhaW5lcilcbiAgICBAZnJlZUxpbmUgICA9ICQoJy5mcmVlLWxpbmUnLCBAY29udGFpbmVyKVxuXG4gICAgQHNldHVwRm9ybSgpXG4gICAgQHNldHVwQ29sb3JDaG9vc2VyKClcbiAgICBAc2V0dXBVbmlvbkNob29zZXIoKVxuICAgIEByZW5kZXIoKVxuXG4gIHNldHVwVW5pb25DaG9vc2VyOiA9PlxuICAgIGZvciB1bmlvbk5hbWUsIHVuaW9uQ29uZmlnIG9mIENvbmZpZy51bmlvbnNcbiAgICAgICQoJyNzZWxlY3QtdW5pb24nKS5hcHBlbmQoXCI8b3B0aW9uIHZhbHVlPScje3VuaW9uTmFtZX0nPiN7dW5pb25OYW1lfTwvb3B0aW9uPlwiKVxuXG4gICAgZm9yIGtnYSBpbiBDb25maWcudW5pb25zWydCZXppcmtzdmVyYmFuZCBQcmVuemxhdWVyIEJlcmcnXVxuICAgICAgJCgnI3NlbGVjdC1rZ2EnKS5hcHBlbmQoXCI8b3B0aW9uIHZhbHVlPScje2tnYX0nPiN7a2dhfTwvb3B0aW9uPlwiKVxuXG4gICAgJCgkKCcjc2VsZWN0LWtnYScpLmZpbmQoJ29wdGlvbicpLmdldCgxKSkuYXR0cignc2VsZWN0ZWQnLCdzZWxlY3RlZCcpXG5cbiAgdXBkYXRlS2dhczogPT5cbiAgICAkKCcjc2VsZWN0LWtnYScpLmZpbmQoJ29wdGlvbicpLnJlbW92ZSgpXG5cbiAgICBjdXJyZW50ID0gJCgnI3NlbGVjdC11bmlvbicpLnZhbCgpXG4gICAgZm9yIGtnYSBpbiBDb25maWcudW5pb25zW2N1cnJlbnRdXG4gICAgICAkKCcjc2VsZWN0LWtnYScpLmFwcGVuZChcIjxvcHRpb24gdmFsdWU9JyN7a2dhfSc+I3trZ2F9PC9vcHRpb24+XCIpXG5cbiAgICAkKCQoJyNzZWxlY3Qta2dhJykuZmluZCgnb3B0aW9uJykuZ2V0KDEpKS5hdHRyKCdzZWxlY3RlZCcsJ3NlbGVjdGVkJylcblxuICAgIEByZW5kZXIoKVxuXG4gIHNldHVwQ29sb3JDaG9vc2VyOiA9PlxuICAgIGZpcnN0Q2xhc3MgPSAnYWN0aXZlJ1xuICAgIGZvciBjb2xvciBpbiBDb25maWcuY29sb3JzXG4gICAgICAkKCcuY29sb3ItY2hvb3NlcicpLmFwcGVuZChcIjxsaSBjbGFzcz0nI3tjb2xvcn0gI3tmaXJzdENsYXNzfScgZGF0YS1jb2xvcj0nI3tjb2xvcn0nPjwvbGk+IFwiKVxuICAgICAgZmlyc3RDbGFzcyA9ICcnXG4gICAgICBcbiAgICAkKCcuY29sb3ItY2hvb3NlciBsaScpLmNsaWNrKCAoZSkgPT5cbiAgICAgICQoJy5jb2xvci1jaG9vc2VyIGxpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXG4gICAgICBjb2xvciA9ICQoZS5jdXJyZW50VGFyZ2V0KS5hZGRDbGFzcygnYWN0aXZlJykuZGF0YSgnY29sb3InKVxuICAgICAgQGJhY2tncm91bmQucHJvcCgnc3JjJywgXCJpbWFnZXMvbGFiZWxzLyN7Y29sb3J9LmpwZ1wiKVxuICAgICAgQGNvbnRhaW5lci5yZW1vdmVDbGFzcyhDb25maWcuY29sb3JzLmpvaW4oJyAnKSlcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoY29sb3IpXG4gICAgKVxuXG4gIHNldHVwRm9ybTogPT5cbiAgICBjdXJyZW50WWVhciA9IChuZXcgRGF0ZSgpKS5nZXRGdWxsWWVhcigpXG4gICAgZm9yIHllYXIgaW4gW2N1cnJlbnRZZWFyLCBjdXJyZW50WWVhciAtIDEsIGN1cnJlbnRZZWFyIC0gMiwgY3VycmVudFllYXIgLSAzXVxuICAgICAgJCgnI3NlbGVjdC15ZWFyJykuYXBwZW5kKCQoJzxvcHRpb24+Jywge3ZhbHVlOiB5ZWFyLCB0ZXh0OiB5ZWFyfSkpXG5cbiAgICAkKCcjaW5wdXQtbmFtZScpLmtleXVwIEByZW5kZXJcbiAgICAkKCcjaW5wdXQtcGFyY2VsJykua2V5dXAgQHJlbmRlclxuICAgICQoJyNpbnB1dC1wYXJjZWwnKS5jaGFuZ2UgQHJlbmRlclxuICAgICQoJyNpbnB1dC1mcmVlLXRleHQnKS5rZXl1cCBAcmVuZGVyXG4gICAgJCgnI3NlbGVjdC1rZ2EnKS5jaGFuZ2UgQHJlbmRlclxuICAgICQoJyNzZWxlY3QtdW5pb24nKS5jaGFuZ2UgQHVwZGF0ZUtnYXNcbiAgICAkKCcjc2VsZWN0LW1vbnRoJykuY2hhbmdlIEByZW5kZXJcbiAgICAkKCcjc2VsZWN0LXllYXInKS5jaGFuZ2UgQHJlbmRlclxuXG4gICAgJCgnI2J1dHRvbi1wcmludCcpLmNsaWNrKCA9PlxuICAgICAgZG9jID0gd2luZG93LmZyYW1lc1sncHJpbnRJZnJhbWUnXVxuICAgICAgY29udGVudCA9IEBjb250YWluZXIucGFyZW50KCkuaHRtbCgpXG4gICAgICBkb2MuZG9jdW1lbnQuYm9keS5pbm5lckhUTUwgPSBjb250ZW50ICsgY29udGVudCArIGNvbnRlbnQgKyBjb250ZW50ICsgY29udGVudCArIGNvbnRlbnQgKyBjb250ZW50ICsgY29udGVudCArIGNvbnRlbnQgKyBjb250ZW50XG5cbiAgICAgICMgJCh3aW5kb3cuZnJhbWVzWydwcmludElmcmFtZSddKS5yZWFkeSggLT5cbiAgICAgICMgICBkb2Mud2luZG93LnByaW50KClcbiAgICAgICMgKVxuICAgICAgc2V0VGltZW91dChcbiAgICAgICAgLT5cbiAgICAgICAgICB3aW5kb3cuZnJhbWVzWydwcmludElmcmFtZSddLndpbmRvdy5wcmludCgpXG4gICAgICAgICwgMjAwXG4gICAgICApXG4gICAgKVxuXG4gIHVwZGF0ZUlmcmFtZUNvbnRlbnQ6ID0+XG4gICAgZG9jID0gd2luZG93LmZyYW1lc1sncHJpbnRJZnJhbWUnXVxuICAgIHJldHVybiB1bmxlc3MgZG9jXG4gICAgY29udGVudCA9IEBjb250YWluZXIucGFyZW50KCkuaHRtbCgpXG4gICAgZG9jLmRvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gY29udGVudCArIGNvbnRlbnQgKyBjb250ZW50ICsgY29udGVudCArIGNvbnRlbnQgKyBjb250ZW50ICsgY29udGVudCArIGNvbnRlbnQgKyBjb250ZW50ICsgY29udGVudFxuXG4gIHJlbmRlcjogPT5cbiAgICBAbmFtZS50ZXh0KCQoJyNpbnB1dC1uYW1lJykudmFsKCkpXG5cbiAgICBkYXRlICAgPSAndm9tICcgKyAkKCcjc2VsZWN0LW1vbnRoJykudmFsKCkgKyAnICcgKyAkKCcjc2VsZWN0LXllYXInKS52YWwoKVxuICAgIEBkYXRlLnRleHQoZGF0ZSlcblxuICAgIHBhcmNlbCA9ICQoJyNpbnB1dC1wYXJjZWwnKS52YWwoKVxuICAgIGtnYSAgICA9ICQoJyNzZWxlY3Qta2dhJykudmFsKClcbiAgICB1bmlvbiAgPSAkKCcjc2VsZWN0LXVuaW9uJykudmFsKClcblxuICAgIGlmICFwYXJjZWwgJiYgIWtnYVxuICAgICAgZnJvbSA9IFwiPGRpdiBjbGFzcz0ndW5pb24gc2luZ2xlJz5BdXMgZGVtICN7dW5pb259PC9kaXY+XCJcbiAgICBlbHNlXG4gICAgICBmcm9tID0gXCI8ZGl2IGNsYXNzPSd1bmlvbic+QXVzIGRlbSAje3VuaW9ufTwvZGl2PlwiXG4gICAgICBwYXJjZWwgPSBcIlBhcnplbGxlICN7cGFyY2VsfVwiIGlmIHBhcmNlbFxuICAgICAgZnJvbSA9IGZyb20gKyBbcGFyY2VsLCBrZ2FdLmZpbHRlcigoZSkgLT4gZSkuam9pbignIC0gJylcblxuICAgIEBmcm9tLmh0bWwoZnJvbSlcblxuICAgIEBmcmVlTGluZS50ZXh0KCQoJyNpbnB1dC1mcmVlLXRleHQnKS52YWwoKSlcblxuICAgIEB1cGRhdGVJZnJhbWVDb250ZW50KClcbiIsIlxuIz0gaW5jbHVkZSBsaWIvY29uZmlnLmNvZmZlZVxuIz0gaW5jbHVkZSBsaWIvdmlld19oYW5kbGVyLmNvZmZlZVxuXG5kbyAtPlxuICBuZXcgVmlld0hhbmRsZXIoJCgnLnByZXZpZXctc2NyZWVuJykpXG4iXX0=
